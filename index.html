<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta charset="utf-8">
<title>四柱推命</title>
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script>
let JP_ZODIAC = ["庚申","辛酉","壬戌","癸亥","甲子","乙丑","丙寅","丁卯","戊辰","己巳","庚午","辛未","壬申","癸酉","甲戌","乙亥","丙子","丁丑","戊寅","己卯","庚辰","辛巳","壬午","癸未","甲申","乙酉","丙戌","丁亥","戊子","己丑","庚寅","辛卯","壬辰","癸巳","甲午","乙未","丙申","丁酉","戊戌","己亥","庚子","辛丑","壬寅","癸卯","甲辰","乙巳","丙午","丁未","戊申","己酉","庚戌","辛亥","壬子","癸丑","甲寅","乙卯","丙辰","丁巳","戊午","己未"];
function isInvalidDate(date){
 return Number.isNaN(date.getTime());
}
function JS_CKSK_oracle(){
	var zodiacYear = oracle_setting.year.value % 60;
	var zodiacMonth = parseInt(oracle_setting.year.value) % 5;
	var zodiacDay = 0;
	zodiacMonth = zodiacMonth * 12
	zodiacMonth = zodiacMonth + parseInt(oracle_setting.month.value);
	zodiacMonth = zodiacMonth + 17;//配列の0が"庚申"になるように調整
	zodiacMonth = zodiacMonth % 60;

	var baseDate = new Date(1888, 2, 21);
	var calcDate = new Date(oracle_setting.year.value, oracle_setting.month.value, oracle_setting.day.value);

	if(isInvalidDate(calcDate)){
		alert("無効な日付です");
		return false;
	}
	var zodiacDay = ((calcDate - baseDate) / 86400000) % 60;

	document.getElementById("pillars_year").innerText = "年柱：" + JP_ZODIAC[zodiacYear];
	document.getElementById("pillars_month").innerText = "月柱：" + JP_ZODIAC[zodiacMonth];
	document.getElementById("pillars_day").innerText = "日柱：" + JP_ZODIAC[zodiacDay];
}
</script>
<link rel="stylesheet" href="">
<link rel="shortcut icon" href="">
</head>
<body>
<form name="oracle_setting">
年<input type="text" maxlength=4 name="year" size=4 value="2022"><br/>
月<input type="text" maxlength=2 name="month" size=2 value="1"><br/>
日<input type="text" maxlength=2 name="day" size=2 value="7"><br/>
</form>
<button onclick="JS_CKSK_oracle()">診断</button>
<div id="pillars_year">年柱：</div>
<div id="pillars_month">月柱：</div>
<div id="pillars_day">日柱：</div>
</body>
</html>

